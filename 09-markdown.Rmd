---
title: "Great American Beer Festival -- Analysis"
subtitle: "A ESOC 214 demonstration"
author: "Adriana Picoral"
date: "Spring 2021"
output:
  html_document:
    toc: true
    number_sections: true
---

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(echo = TRUE, message = FALSE)
```

# Text Formatting

## Italics and Bold

This is a *word in italics*.

This is a **word in bold**.

## Lists

* this is the first item
* this is the second item

1. this is the first item
1. this is the second item
1. this is the third item

## Other formatting

You can add a link to a website like [Kaggle website](https://www.kaggle.com) to link out.

> this is a block quote

# Data Wrangling

Let's read our data in.

```{r echo=FALSE, message=FALSE}
# load library
library(tidyverse)

# read data in
beer_awards <- read_csv("data/clean_beer_awards.csv")

# inspect data
glimpse(beer_awards)
```

## Tables

### Data Tables

Here we printing the first 10 rows in our data.

```{r}
beer_awards %>%
  head(10) %>%
  kable()
```

> Question: What are the top 10 states with the most beer awards in the United States?

```{r message=FALSE}
beer_awards %>%
  count(state_name, sort = TRUE) %>%
  top_n(10) %>%
  kable(col.names = c("State", "Award Count"))
```

> Question: What is the distribution of awards across different regions in the United States?

```{r}
# start with beer_awards and the count by region and the format the
# table with kable (check in at 3:10pm)
beer_awards %>%
  count(region) %>%
  arrange(-n) %>%
  kable(col.names = c("Region", "Award Count"),
        caption = "Distribution of beer awards across regions in the US.")
```

### Manual Tables

| Column 1 | Column 2 | Column 3 |
| -------- | :-------: | --------: |
| word | word 2 | word 3 |
| word | word 2 | word 3 |
| word | word 2 | word 3 |
| word | word 2 | word 3 |

# Plots

> Question: What is the distribution of awards across different beer categories and different regions?

```{r fig.height=6}
library(tidytext)

beer_awards %>%
  filter(region != "District of Columbia") %>%
  count(region, macro_category) %>%
  ggplot(aes(y = reorder_within(macro_category, n, region),
             x = n,
             fill = region)) +
  geom_col() +
  facet_wrap(~region, scales = "free_y") +
  labs(y = "Beer Category") +
  theme(legend.position = "none") +
  scale_y_reordered()
```

There are `r nrow(beer_awards)` observations in the data.

There are `r ncol(beer_awards)` variables in the data, and they are: `r colnames(beer_awards)`.




